#service_port
PORT 8001
SERV HTTP
PCMD r':Body>\s*<hlr:(\w+?)[\s>]'
PISDNREQ '<name>+86(\d+)</name>'
PISDNRSP '<ISDN>\d+</ISDN>'
PIMSIREQ '<hss:IMSI>(\d+)</hss:IMSI>'
PIMSIRSP '<IMSI>\d+</IMSI>'

#request command
LGI
LST_GPRS
LST_SUB
LST_EPS
LST_CFALL
LST_CBAR
RMV_SIFC
MOD_CB
LST_IMSSUB

#response head
HEAD_KEY: LGI_HEAD
Resp-Code: 307
Location: http://%s:%d/01M1U6kBFFxv39uhbpNMyvRPcmC5yblhjKeJCCr88SfWZBIJBeNXGBVtvcUoUCP2
Server: Huawei web server
Content-Type: text/xml; charset="utf-8"
Content-Length: %d

HEAD_KEY: COMM_HEAD
Resp-Code: 200
Server: Huawei web server
Content-Type: text/xml; charset="utf-8"
Content-Length: %d

#response body
LGI_BODY
<?xml version="1.0" ?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><SOAP-ENV:Body><LGIResponse xmlns="http://www.huawei.com/HLR9820/LGI" ><Result><ResultCode>0</ResultCode><ResultDesc>SUCCESS0001:Operation is successful</ResultDesc></Result></LGIResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_GPRS_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <LST_GPRSResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>0</ResultCode>            <ResultDesc>SUCCESS</ResultDesc>            <ResultData>            <IMSI>460001279036491</IMSI><ISDN>8618811768593</ISDN><CHARGE_GLOBAL>PREPAID</CHARGE_GLOBAL><NAM>BOTH</NAM><Group><CNTXID>1</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMNET</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>2</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMWAP</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>3</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMMM</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>4</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMDM</APN><VPLMN>FALSE</VPLMN></Group>            </ResultData>        </Result>    </LST_GPRSResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_SUB_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <LST_SUBResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>0</ResultCode>            <ResultDesc>SUCCESS</ResultDesc>            <ResultData>            <Group Name="Basic Data"><Group><HLRSN>1</HLRSN><IMSI>460001279036491</IMSI></Group><Group><ISDN>8618811768593</ISDN></Group><Group><NAM>BOTH</NAM><CATEGORY>COMMON</CATEGORY></Group><Group><ACTIVE>TRUE</ACTIVE></Group></Group><Group Name="ARD"><UTRANNOTALLOWED>FALSE</UTRANNOTALLOWED><GERANNOTALLOWED>FALSE</GERANNOTALLOWED><IHSPAENOTALLOWED>FALSE</IHSPAENOTALLOWED><EUTRANNOTALLOWED>FALSE</EUTRANNOTALLOWED></Group><Group Name="LOCK"><GSM_IC>FALSE</GSM_IC><GSM_OC>FALSE</GSM_OC></Group><Group Name="GPRSLOCK"><GPRSLOCK>FALSE</GPRSLOCK></Group><Group Name="EPSLOCK"><EPSLOCK>FALSE</EPSLOCK></Group><Group Name="Basic Service"><Group Name="TSCODE :"><TS>Telephony (TS11)</TS><TS>Short Message MT_PP (TS21)</TS><TS>Short Message MO_PP (TS22)</TS></Group><Group Name="BSCODE :"><BS>General-DataCDS  (BS30)</BS></Group></Group><Group Name="ODB Data"><ODBPB1>FALSE</ODBPB1><ODBPB2>FALSE</ODBPB2><ODBPB3>FALSE</ODBPB3><ODBPB4>FALSE</ODBPB4><ODBSS>FALSE</ODBSS><ODBIC>NOBIC</ODBIC><ODBOC>NOBOC</ODBOC><ODBROAM>NOBAR</ODBROAM><ODBPOS>NOBPOS</ODBPOS><ODBENTE>FALSE</ODBENTE><ODBINFO>FALSE</ODBINFO><ODBRCF>BRICFEXHC</ODBRCF></Group><Group Name="SS Data"><Group Name="CFU"><CFU>PROV</CFU></Group><Group Name="CFB"><CFB>PROV</CFB></Group><Group Name="CFNRY"><CFNRY>PROV</CFNRY></Group><Group Name="CFNRC"><CFNRC>PROV</CFNRC></Group><Group Name="CFD"><CFD>NOTPROV</CFD></Group><Group Name ="OTHER SS"><BAOC>PROV</BAOC><BOIC>PROV</BOIC><BOICEXHC>PROV</BOICEXHC><BAIC>PROV</BAIC><BICROAM>PROV</BICROAM><CBCOU>OPERATOR</CBCOU><CLIP>PROV</CLIP><CLIPOVERRIDE>FALSE</CLIPOVERRIDE><CLIR>NOTPROV</CLIR><COLP>NOTPROV</COLP><COLPOVERRIDE>FALSE</COLPOVERRIDE><COLR>NOTPROV</COLR><CW>PROV</CW><HOLD>PROV</HOLD><MPTY>NOTPROV</MPTY><plmn-specificSS-1>NOTPROV</plmn-specificSS-1><plmn-specificSS-2>NOTPROV</plmn-specificSS-2><plmn-specificSS-3>NOTPROV</plmn-specificSS-3><plmn-specificSS-4>NOTPROV</plmn-specificSS-4><plmn-specificSS-5>NOTPROV</plmn-specificSS-5><plmn-specificSS-6>NOTPROV</plmn-specificSS-6><plmn-specificSS-7>NOTPROV</plmn-specificSS-7><plmn-specificSS-8>NOTPROV</plmn-specificSS-8><plmn-specificSS-9>NOTPROV</plmn-specificSS-9><plmn-specificSS-A>NOTPROV</plmn-specificSS-A><plmn-specificSS-B>NOTPROV</plmn-specificSS-B><plmn-specificSS-C>NOTPROV</plmn-specificSS-C><plmn-specificSS-D>NOTPROV</plmn-specificSS-D><plmn-specificSS-E>NOTPROV</plmn-specificSS-E><plmn-specificSS-F>NOTPROV</plmn-specificSS-F></Group></Group><Group Name="CAMEL"><Group Name="TIF-CSI"><TIFCSI>FALSE</TIFCSI></Group><Group Name="OIF-CSI"><OIFCSI>FALSE</OIFCSI></Group></Group><Group Name="GPRS Data"><Group><CHARGE_GLOBAL>PREPAID</CHARGE_GLOBAL></Group><Group><CNTXID>1</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMNET</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>2</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMWAP</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>3</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMMM</APN><VPLMN>FALSE</VPLMN></Group><Group><CNTXID>4</CNTXID><PDPTYPE>IPV4</PDPTYPE><APN>CMDM</APN><VPLMN>FALSE</VPLMN></Group></Group><Group Name="EPS Data"><Group><CHARGE_GLOBAL>PREPAID</CHARGE_GLOBAL><AMBRMAXUL>256000</AMBRMAXUL><AMBRMAXDL>256000</AMBRMAXDL><DIAMNODETPLID>950</DIAMNODETPLID></Group><Group><APN>CMWAP</APN><CNTXID>2</CNTXID><PDPTYPE>IPV4IPV6</PDPTYPE><DEFAULTAPN>FALSE</DEFAULTAPN><WILDCARDAPN>FALSE</WILDCARDAPN><PDNGWALLOCTYPE>DYNAMIC</PDNGWALLOCTYPE><IPV4ADDIND>DYNAMIC</IPV4ADDIND><OTHERADDIND>DYNAMIC</OTHERADDIND><VPLMNALLOWED>FALSE</VPLMNALLOWED><CHARGE>PREPAID</CHARGE><AMBRMAXREQBWUL>256000</AMBRMAXREQBWUL><AMBRMAXREQBWDL>256000</AMBRMAXREQBWDL></Group><Group><APN>CMNET</APN><CNTXID>1</CNTXID><PDPTYPE>IPV4IPV6</PDPTYPE><DEFAULTAPN>TRUE</DEFAULTAPN><WILDCARDAPN>FALSE</WILDCARDAPN><PDNGWALLOCTYPE>DYNAMIC</PDNGWALLOCTYPE><IPV4ADDIND>DYNAMIC</IPV4ADDIND><OTHERADDIND>DYNAMIC</OTHERADDIND><VPLMNALLOWED>FALSE</VPLMNALLOWED><CHARGE>PREPAID</CHARGE><AMBRMAXREQBWUL>256000</AMBRMAXREQBWUL><AMBRMAXREQBWDL>256000</AMBRMAXREQBWDL></Group></Group><Group><VLRLIST_ID>600</VLRLIST_ID></Group><Group Name ="CSLocationData"><VLRNO>8613441445</VLRNO><MSCNO>8613441445</MSCNO></Group><Group Name ="EPSLocationData"><MMENO>mmec44.mmegi0102.mme.epc.mnc000.mcc460.3gppnetwork.org</MMENO></Group>            </ResultData>        </Result>    </LST_SUBResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_EPS_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <LST_EPSResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>0</ResultCode>            <ResultDesc>SUCCESS</ResultDesc>            <ResultData>            <IMSI>460001279036491</IMSI><ISDN>8618811768593</ISDN><Group Name="EPS Data"><Group><CHARGE_GLOBAL>PREPAID</CHARGE_GLOBAL><AMBRMAXUL>256000</AMBRMAXUL><AMBRMAXDL>256000</AMBRMAXDL><DEFAULTCNTXID>1</DEFAULTCNTXID></Group><Group><APN>CMWAP</APN><CNTXID>2</CNTXID><PDPTYPE>IPV4IPV6</PDPTYPE><DEFAULTAPN>FALSE</DEFAULTAPN><WILDCARDAPN>FALSE</WILDCARDAPN><PDNGWALLOCTYPE>DYNAMIC</PDNGWALLOCTYPE><IPV4ADDIND>DYNAMIC</IPV4ADDIND><OTHERADDIND>DYNAMIC</OTHERADDIND><VPLMNALLOWED>FALSE</VPLMNALLOWED><CHARGE>PREPAID</CHARGE><AMBRMAXREQBWUL>256000</AMBRMAXREQBWUL><AMBRMAXREQBWDL>256000</AMBRMAXREQBWDL></Group><Group><APN>CMNET</APN><CNTXID>1</CNTXID><PDPTYPE>IPV4IPV6</PDPTYPE><DEFAULTAPN>TRUE</DEFAULTAPN><WILDCARDAPN>FALSE</WILDCARDAPN><PDNGWALLOCTYPE>DYNAMIC</PDNGWALLOCTYPE><IPV4ADDIND>DYNAMIC</IPV4ADDIND><OTHERADDIND>DYNAMIC</OTHERADDIND><VPLMNALLOWED>FALSE</VPLMNALLOWED><CHARGE>PREPAID</CHARGE><AMBRMAXREQBWUL>256000</AMBRMAXREQBWUL><AMBRMAXREQBWDL>256000</AMBRMAXREQBWDL></Group></Group>            </ResultData>        </Result>    </LST_EPSResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_CFALL_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body> <LST_CFALLResponse xmlns="http://www.chinamobile.com/HSS/"> <Result> <ResultCode>0</ResultCode> <ResultDesc>SUCCESS</ResultDesc> <ResultData> <Group><IMSI>460001279036491</IMSI><ISDN>8613681271165</ISDN></Group><Group Name="CFU"><NCS>FALSE</NCS></Group><Group name="CFU-FTN"><BSG>BS3X</BSG><STATUS>PROV</STATUS></Group><Group name="CFU-FTN"><FTN>8613911737717</FTN><BSG>TS1X</BSG><STATUS>ACT</STATUS></Group><Group name="CFU-FTN"><BSG>TS2X</BSG><STATUS>PROV</STATUS></Group><Group Name="CFB"><NFS>FALSE</NFS><NCS>FALSE</NCS></Group><Group name="CFB-FTN"><FTN>8613910768699</FTN><BSG>TS1X</BSG><STATUS>ACT</STATUS></Group><Group Name="CFNRY"><NFS>FALSE</NFS><NCS>FALSE</NCS></Group><Group name="CFNRY-FTN"><FTN>NULL</FTN><BSG>ALL BS</BSG><STATUS>PROV</STATUS></Group><Group Name="CFNRC"><NCS>FALSE</NCS></Group><Group name="CFNRC-FTN"><FTN>8613911737717</FTN><BSG>BS3X</BSG><STATUS>ACT</STATUS></Group><Group name="CFNRC-FTN"><FTN>8613911737717</FTN><BSG>TS1X</BSG><STATUS>NOTPROV</STATUS></Group><Group Name="CFD">NOTPROV</Group> </ResultData> </Result> </LST_CFALLResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_CBAR_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <LST_CBARResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>0</ResultCode>            <ResultDesc>SUCCESS</ResultDesc>            <ResultData>            <IMSI>460001279036491</IMSI><ISDN>8618811768593</ISDN><Group Name="BAOC"><TS1X>PROV</TS1X><TS2X>PROV</TS2X><BS3X>PROV</BS3X></Group><Group Name="BOIC"><TS1X>PROV | ACT</TS1X><TS2X>PROV | ACT</TS2X><BS3X>PROV | ACT</BS3X></Group><Group Name="BOICEXHC"><TS1X>PROV</TS1X><TS2X>PROV</TS2X><BS3X>PROV</BS3X></Group><Group Name="BAIC"><TS1X>PROV</TS1X><TS2X>PROV</TS2X><BS3X>PROV</BS3X></Group><Group Name="BICROAM"><TS1X>PROV</TS1X><TS2X>PROV</TS2X><BS3X>PROV</BS3X></Group>            </ResultData>        </Result>    </LST_CBARResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

LST_IMSSUB_BODY
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <LST_IMSSUBResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>0</ResultCode>            <ResultDesc>SUCCESS</ResultDesc>            <ResultData>            <GROUP><IMSI>460020011842961</IMSI><ISDN>8613401124682</ISDN><IMPI>460020011842961@ims.mnc002.mcc460.3gppnetwork.org</IMPI><IMPU>sip:460020011842961@ims.mnc002.mcc460.3gppnetwork.org</IMPU><IRSID>basic_irs</IRSID><RESSTATUS>registered</RESSTATUS><DEFIMPU>false</DEFIMPU></GROUP><GROUP><IMSI>460020011842961</IMSI><ISDN>8613401124682</ISDN><IMPI>460020011842961@ims.mnc002.mcc460.3gppnetwork.org</IMPI><IMPU>sip:+8613401124682@bj.ims.mnc000.mcc460.3gppnetwork.org</IMPU><IRSID>basic_irs</IRSID><RESSTATUS>registered</RESSTATUS><DEFIMPU>true</DEFIMPU></GROUP><GROUP><IMSI>460020011842961</IMSI><ISDN>8613401124682</ISDN><IMPI>460020011842961@ims.mnc002.mcc460.3gppnetwork.org</IMPI><IMPU>tel:+8613401124682</IMPU><IRSID>basic_irs</IRSID><RESSTATUS>registered</RESSTATUS><DEFIMPU>false</DEFIMPU></GROUP><GROUP><SRVCC>1</SRVCC></GROUP><GROUP><GUSSTPLID>715</GUSSTPLID></GROUP>            </ResultData>        </Result>    </LST_IMSSUBResponse></SOAP-ENV:Body>

COMM_BODY
<?xml version="1.0" ?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><SOAP-ENV:Body><HWHSSCMDResponse xmlns="http://www.chinamobile.com/HSS/" ><Result><ResultCode>0</ResultCode></Result></HWHSSCMDResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

ERR3037_BODY
<?xml version="1.0" ?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><SOAP-ENV:Body><HWHSSCMDResponse xmlns="http://www.chinamobile.com/HSS/" ><Result><ResultCode>3037</ResultCode><ResultDesc>ERR3037:Database updated but network update failure. Indication: operator should send cancellocation</ResultDesc></Result></HWHSSCMDResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>
ERR3500_BODY
<?xml version="1.0" ?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body> <HWHSSCMDResponse xmlns="http://www.chinamobile.com/HSS/"> <Result> <ResultCode>3500</ResultCode> <ResultDesc>The LDAP execution failed.</ResultDesc> </Result> </HWHSSCMDResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

ERR1038_BODY
<?xml version="1.0" ?><SOAP-ENV:Envelope  xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body>     <RMV_SIFCResponse xmlns="http://www.chinamobile.com/HSS/">        <Result>             <ResultCode>1038</ResultCode>            <ResultDesc>The record does not exist</ResultDesc>        </Result>    </RMV_SIFCResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>


#mapping of request and response
LGI LGI_HEAD LGI_BODY
LST_GPRS COMM_HEAD LST_GPRS_BODY
LST_SUB COMM_HEAD LST_SUB_BODY
LST_EPS COMM_HEAD LST_EPS_BODY
LST_CFALL COMM_HEAD LST_CFALL_BODY
LST_CBAR COMM_HEAD LST_CBAR_BODY
LST_IMSSUB COMM_HEAD LST_IMSSUB_BODY
MOD_CB COMM_HEAD COMM_BODY
RMV_SIFC COMM_HEAD ERR1038_BODY
OTHER COMM_HEAD COMM_BODY

